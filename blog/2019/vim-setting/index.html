<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Vim environment creation | Yongsoo Kim </title> <meta name="author" content="Yongsoo Kim"> <meta name="description" content="a note for setting up vim environment"> <meta name="keywords" content="Bioinformatics, Machine learning, Multiomics"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" href="/assets/css/scholar-icons.css?62b2ac103a88034e6882a5be5f3e2772"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="/assets/img/multi-omics_small.png?be28b0abbc4793a68540b0d57b240708"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://anoyaro84.github.io/blog/2019/vim-setting/"> <script src="/assets/js/theme.js?a81d82887dd692e91686b43de4542f18"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>
    initTheme();
  </script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Yongsoo</span> Kim </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">Yongsoo Kim </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv </a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications </a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">repositories </a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">blog </a> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">Vim environment creation</h1> <p class="post-meta"> Created on December 31, 2019 </p> <p class="post-tags"> <a href="/blog/2019"> <i class="fa-solid fa-calendar fa-sm"></i> 2019 </a> </p> </header> <article class="post-content"> <div id="markdown-content"> <p>Here, I would like to keep a note on how I constructed my vim environment. In particular, I need the following features for my python development.</p> <h4 id="my-need-in-the-ideal-world">My need (in the ideal world)</h4> <ul> <li> Syntax support (e.g., highlighting). </li> <li> Autocompletion - for files and variables. </li> <li> Navigate to other files.</li> <li> Compatible with multiple environment, mostly maintained by conda.</li> <li> Good support of snakmake.</li> <li> Interactive python/R session to test the script.</li> </ul> <hr> <h3> 1. Vim installation </h3> <p>I first updated vim to version 8.2, installing from the source (from the <a href="https://github.com/vim/vim" rel="external nofollow noopener" target="_blank">official github repo</a>. Python should be used to compile vim, using the following options for configuration:</p> <figure class="highlight"><pre><code class="language-shell" data-lang="shell">./configure <span class="nt">--with-features</span><span class="o">=</span>huge <span class="se">\</span>
            <span class="nt">--enable-multibyte</span> <span class="se">\</span>
            <span class="nt">--enable-rubyinterp</span><span class="o">=</span><span class="nb">yes</span> <span class="se">\</span>
            <span class="nt">--enable-python3interp</span><span class="o">=</span><span class="nb">yes</span> <span class="se">\</span>
            <span class="nt">--with-python3-config-dir</span><span class="o">=</span><span class="si">$(</span>python3-config <span class="nt">--configdir</span><span class="si">)</span> <span class="se">\</span>
            <span class="nt">--enable-perlinterp</span><span class="o">=</span><span class="nb">yes</span> <span class="se">\</span>
            <span class="nt">--enable-luainterp</span><span class="o">=</span><span class="nb">yes</span> <span class="se">\</span>
            <span class="nt">--enable-gui</span><span class="o">=</span>gtk2 <span class="se">\</span>
            <span class="nt">--enable-cscope</span></code></pre></figure> <p>Check <a href="https://github.com/ycm-core/YouCompleteMe/wiki/Building-Vim-from-source" rel="external nofollow noopener" target="_blank">this thread</a> for dependancy of the installation.</p> <p>In my case (Linux mint), I need to set <code class="language-plaintext highlighter-rouge">LDFLAGS</code> to <code class="language-plaintext highlighter-rouge">-fno-lto</code> before configuration. Otherwise <code class="language-plaintext highlighter-rouge">gcc</code> gave error. (check <a href="https://github.com/halide/Halide/issues/2713" rel="external nofollow noopener" target="_blank">this thread</a>)</p> <h3> 2. Plugin installation with Vundle </h3> <p>Then, plugins are installed using Vundle, mostly conscerns editing <code class="language-plaintext highlighter-rouge">.vimrc</code>. To install Vundle, run the following command (see also the <a href="https://github.com/VundleVim/Vundle.vim" rel="external nofollow noopener" target="_blank">official repository of Vundle</a>).</p> <figure class="highlight"><pre><code class="language-shell" data-lang="shell">git clone https://github.com/VundleVim/Vundle.vim.git ~/.vim/bundle/Vundle.vim</code></pre></figure> <p>To install a plugin with Vundle, add the following in <code class="language-plaintext highlighter-rouge">.vimrc</code>:</p> <figure class="highlight"><pre><code class="language-shell" data-lang="shell"><span class="nb">set </span>rtp+<span class="o">=</span>~/.vim/bundle/Vundle.vim
call vundle#begin<span class="o">()</span>

Plugin <span class="s1">'NAME_OF_THE_PLUGIN'</span>

call vundle#end<span class="o">()</span>            <span class="s2">" required</span></code></pre></figure> <p>Note that for plugins from a github repository can be referred like: <code class="language-plaintext highlighter-rouge">ncm2/ncm2</code>. For the actual installation, execute <code class="language-plaintext highlighter-rouge">:PluginInstall</code> once after starting vim.</p> <p>Key plugins include (final <code class="language-plaintext highlighter-rouge">.vimrc</code> is also available below):</p> <ul> <li> <a href="https://github.com/davidhalter/jedi-vim" rel="external nofollow noopener" target="_blank">jedi-vim</a> - python auto-completion support</li> <li> <a href="https://github.com/preservim/nerdtree" rel="external nofollow noopener" target="_blank">NERDTree</a> - for browing files in vim</li> <li> <a href="https://github.com/jalvesaq/Nvim-R" rel="external nofollow noopener" target="_blank">Nvim-R</a> - for R integration </li> <li> <a href="https://github.com/gaalcaras/ncm-R" rel="external nofollow noopener" target="_blank">ncm-R</a> - for asynchronous autocompletion when editing R scripts </li> </ul> <p>Note that <code class="language-plaintext highlighter-rouge">pynvim</code> and <code class="language-plaintext highlighter-rouge">neovim</code> are required for some of the plugins. (install via <code class="language-plaintext highlighter-rouge">conda</code> or <code class="language-plaintext highlighter-rouge">pip</code>)</p> <h3> 3. python sytax support for Snakefile </h3> <p>I obtained the <a href="https://bitbucket.org/jayhesselberth/snakemake/src/master/misc/vim/syntax/snakemake.vim" rel="external nofollow noopener" target="_blank">syntax definition of snakemake</a> for vim by Jay Hesselberth (@ University of Colorado), and then merely added the following line to start <code class="language-plaintext highlighter-rouge">jedi-vim</code>, which is executed only for python files (<code class="language-plaintext highlighter-rouge">.py</code>) by default.</p> <figure class="highlight"><pre><code class="language-shell" data-lang="shell">runtime! ftplugin/python/jedi.vim after/ftplugin/python/jedi.vim</code></pre></figure> <h3> 4. Support to multiple environments by conda </h3> <p>By activating environments using conda (by <code class="language-plaintext highlighter-rouge">conda activate</code>), you can switch R or python version used in vim support. For instance, you will see autocompletion for a python package if the active envrionment have the package installed. Vice versa, if you activate an enviornment that lacks the package, then you will see no autocompletion for this package. Also, if there is an specific version of R installed within an environment, then the very version of R will be used in Nvim-R upon activation of the environment.</p> <p><strong>There is a catch though.</strong> Some plugin may not function properly, if you have different version of python available in the environment. Especially, some plugins require <code class="language-plaintext highlighter-rouge">python 3</code>, so they will not work (at least, not properly) when <code class="language-plaintext highlighter-rouge">python 2</code> is there.</p> <p>Also, you need to install <code class="language-plaintext highlighter-rouge">pynvim</code> and <code class="language-plaintext highlighter-rouge">neovim</code> (from <code class="language-plaintext highlighter-rouge">conda-forge</code> channel) in each environment, using: <code class="language-plaintext highlighter-rouge">conda install -c conda-forge neovim pynvim</code>.</p> <h3> The final outcome files: </h3> <ul> <li> <a href="/assets/scripts/vimrc">.vimrc</a> (to be located at ~/)</li> <li> <a href="/assets/scripts/snakemake.vim">snakmake.vim</a> (to be located at ~/.vim/syntax/) </li> </ul> <hr> <p>Further reference:</p> <ul> <li> I took the useful vim plugins for Python editing from the following <a href="https://realpython.com/vim-and-python-a-match-made-in-heaven/" rel="external nofollow noopener" target="_blank"> instruction</a>.</li> </ul> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2020/nvim-setting/">Switching to neovim</a> </li> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2025 Yongsoo Kim. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Photos from <a href="https://unsplash.com" target="_blank" rel="external nofollow noopener">Unsplash</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js?a0db7e5d5c70cc3252b3138b0c91dcaf" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?c8a01c11a92744d44b093fc3bda915df" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script src="/assets/js/mathjax-setup.js?a5bb4e6a542c546dd929b24b8b236dfd"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script defer src="/assets/js/progress-bar.js?2f30e0e6801ea8f5036fa66e1ab0a71a" type="text/javascript"></script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>
    addBackToTop();
  </script> <script type="module" src="/assets/js/search/ninja-keys.min.js?a3446f084dcaecc5f75aa1757d087dcf"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script src="/assets/js/search-setup.js?6c304f7b1992d4b60f7a07956e52f04a"></script> <script src="/assets/js/search-data.js"></script> <script src="/assets/js/shortcut-key.js?6f508d74becd347268a7f822bca7309d"></script> </body> </html>